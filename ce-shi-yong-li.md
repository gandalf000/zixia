# 测试用例

## 登陆

功能描述:

> 1. 三次登陆逻辑需要确认（TODO：立鹏）
> 2. 签名认证服务后续怎么独立部署（TODO：立鹏）

测试用例

> 1. 签名错误，登陆失败
> 2. 签名正确，登陆成功

## 添加好友

功能描述:

> 1. A发送添加B成为好友的请求
> 2. 服务端处理添加好友的请求，回复A请求执行成功
> 3. 服务端推送A添加B的消息给B
> 4. B收到A的添加好友请求
> 5. B同意或者拒绝A的添加好友请求
> 6. 如果同意：B的所有终端收到A添加B成为好友成功的通知消息。
> 7. A收到B的同意和拒绝添加好友的消息

测试用例

> 1. B在线，并同意A的添加好友请求
> 2. B在线，并拒绝A的添加好友请求
> 3. B离线，然后再上线，同意A的添加好友请求
> 4. B离线，然后再上线，拒绝A的添加好友请求
> 5. A在线，B离线，发出添加好友的请求，A离线，然后B上线，同意A的添加好友请求，然后A上线，收到B的同意消息。（B同意时，A离线）
> 6. A在线，B离线，发出添加好友的请求，A离线，然后B上线，拒绝A的添加好友请求，然后A上线，收到B的拒绝消息。（B拒绝时，A离线）
> 7. B两个端在线，同时收到A的添加好友请求， B1同意，B2同意， A收到B1的同意请求，不回收到B2的同意请求。
> 8. B两个端在线，同时收到A的添加好友请求， B1拒绝，B2同意， A收到B1的拒绝请求，A收到B2的同意请求。
> 9. B一个端在线，收到A的添加好友请求，然后B第二个端也上线，B第二端也回收到A的添加好友请求，B一个端同意A的添加好友请求，A收到添加好友通过通知消息，B的所有端收到添加好友通过通知消息。

## 删除好友

功能描述:

> 1. A发送删除B的请求
> 2. A收到服务器响应
> 3. A和B都收到删除好友的消息。

测试用例

> 1. A在线，B不在线，A发送删除B的请求，A收到回复消息， A收到好友删除通知消息，B上线，B收到删除好友通知消息。
> 2. A在线，B在线，A发送删除B的请求，A收到回复消息， A收到好友删除通知消息，B收到删除好友通知消息。
> 3. A在线，B有2个端在线，A发送删除B的请求，A收到回复消息， A收到删除好友通知消息，B的2个端都收到删除好友通知消息。
> 4. A有2个端在线，B不在线，A发送删除B的请求，A 收到回复消息， A的2个端都收删除好友通知消息。B上线，B收到删除好友消通知消息。

## 获取好友列表

功能描述:

> 1. 获取好友列表，收到回复

测试用例

> 1. 一个好友都没有，获取好友列表，这个时候为空。
> 2. 多个好友，获取好友列表，检查好友数目、其他信息。\(先不支持分页\)
> 3. 好友的其他详细信息（包括头像等信息）都在uinfo里面，需要用户自己获取。

## 获取用户在线信息

功能描述:

> 1. 批量获取用户的在线状态

测试用例

> 1. A在线，B不在线，C获取用户A和B的在线状态：A在线，B不在线。
> 2. A在线，B不在线，C获取用户A和B的在线状态：A在线，B不在线，如果B再上线，需要C自己去轮训获取到B的在线状态。

## 拉黑好友

功能描述:

> 1. 按uid拉黑用户，收到回复

测试用例

> 1. 自己拉黑自己，返回出错
> 2. B不在A的黑名单中， A拉黑B， 请求成功。
> 3. B已经在A的黑名单中，A拉黑B，返回已经存在。
> 4. A拉黑B以后，A获取黑名单列表，列表中有B的uid。
> 5. A拉黑B以后，B发送消息给A，A收不到消息。

## 取消拉黑好友

功能描述:

> 1. 按照uid取消之前的拉黑，收到回复

测试用例

> 1. 自己取消拉黑自己，返回出错。
> 2. B在A的黑名单中， A取消拉黑B，请求成功。
> 3. B不在A的黑名单中，A拉黑B，请求成功。
> 4. A取消拉黑B以后，A获取黑名单列表，列表中不会包含B的uid。
> 5. A取消拉黑B以后，B发消息给A，A可以收到。

## 获取拉黑列表

功能描述:

> 1. 获取用户和名单列表，收到回复

测试用例

> 1. 黑名单中无用户，获取到空列表
> 2. 黑名单中有多个用户，获取黑名单列表，检查列表中各项目是否正确

## 单聊

功能描述:

> 1. A发送消息给B。
> 2. A收到服务器回复成功。
> 3. A的所有终端和B的所有终端都会收到A发送的消息。

测试用例\(消息可达&正确性\)

> 1. A在线，B有2个终端在线，A收到成功回复，B的2个端收到A发送的消息 ： 检查消息正确性。
> 2. A在线，B有1个终端在线，A收到成功回复，B新增1个终端上线，B的2个端都收到A发送的消息，检查消息正确性。
> 3. A有2个端在线， B在线，A收到成功回复，B 收到A发送的消息，A另外一个端也会收到A发送给B的消息，检查消息正确性。
> 4. A 如果发送给已经拉黑的B，A收到已拉黑的回复， B收不到。



## 创建群组

功能描述:

> 1. 发送创建群组请求，收到回复

测试用例

> 1. 测试各个type是否可以设置成功
> 2. 测试各个权限组合是否成功
> 3. 测试中文群名称 中文简介
> 4. 测试获取群信息接口获取的群信息是否和创建时候一样



## 拉人进群

功能描述

1. A拉B,C进群
2. B,C直接进入群
3. 除B,C外的其他成员收到新成员被拉进群通知

测试用例

1. B不在群里，群组权限没有 kOnlyAdminCanInvite 设置， A拉B， B直接进入群里，A和其他成员收到通知；
2. B在群里，群组权限没有 kOnlyAdminCanInvite ， A拉B，请求成功，其他成员不会收到通知；
3. 群组权限设置了kOnlyAdminCanInvite， A是管理员，情况同1,2
4. 群组权限设置了kOnlyAdminCanInvite， A不是管理员，A拉B，返回没有权限错误；
5. 自己拉自己，目前返回成功，群成员不会收到通知；
6. 拉人list为空， 返回成功，无通知；
7. 拉多人的情况，检查收到的通知中的uid数量是否正确；

